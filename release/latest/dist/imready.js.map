{"version":3,"file":"imready.js","sources":["../src/consts.ts","../src/utils.ts","../src/AutoSizer.ts","../src/loaders/Loader.ts","../src/loaders/ElementLoader.ts","../src/ImReadyManager.ts","../src/loaders/ImageLoader.ts","../src/loaders/VideoLoader.ts","../src/ImReady.ts","../src/reactive.ts","../src/index.ts","../src/index.umd.ts"],"sourcesContent":["/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nconst isWindow = typeof window !== \"undefined\";\nconst ua = isWindow ? window.navigator.userAgent : \"\";\nexport const SUPPORT_COMPUTEDSTYLE = isWindow ? !!(\"getComputedStyle\" in window) : false;\nexport const IS_IE = /MSIE|Trident|Windows Phone|Edge/.test(ua);\nexport const SUPPORT_ADDEVENTLISTENER = isWindow ? !!(\"addEventListener\" in document) : false;\nexport const WIDTH = \"width\";\nexport const HEIGHT = \"height\";\n\nexport const PROPS = [\n  \"prefix\",\n  \"loaders\",\n] as const;\n\nexport const EVENTS = [\n  \"preReadyElement\",\n  \"readyElement\",\n  \"error\",\n  \"preReady\",\n  \"ready\",\n] as const;\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { ArrayFormat } from \"./types\";\n\nimport { SUPPORT_ADDEVENTLISTENER, SUPPORT_COMPUTEDSTYLE } from \"./consts\";\n\nexport function getAttribute(el: HTMLElement, name: string): string {\n  return el.getAttribute(name) || \"\";\n}\n\nexport function toArray<T>(arr: ArrayFormat<T>): T[] {\n  return [].slice.call(arr);\n}\nexport function hasSizeAttribute(target: HTMLElement, prefix = \"data-\"): boolean {\n  return !!target.getAttribute(`${prefix}width`);\n}\nexport function hasLoadingAttribute(target: HTMLElement, prefix = \"data-\"): target is HTMLImageElement {\n  return ((\"loading\" in target) && (target as HTMLImageElement).getAttribute(\"loading\") === \"lazy\")\n    || !!target.getAttribute(`${prefix}lazy`);\n}\nexport function hasSkipAttribute(target: HTMLElement, prefix = \"data-\"): boolean {\n  return !!target.getAttribute(`${prefix}skip`);\n}\nexport function addEvent(\n  element: EventTarget,\n  type: string,\n  handler: (...args: any[]) => void,\n) {\n  if (SUPPORT_ADDEVENTLISTENER) {\n    element.addEventListener(type, handler, false);\n  } else if ((element as any).attachEvent) {\n    (element as any).attachEvent(`on${type}`, handler);\n  } else {\n    (element as any)[`on${type}`] = handler;\n  }\n}\nexport function removeEvent(\n  element: EventTarget,\n  type: string,\n  handler: (...args: any[]) => void,\n) {\n  if (element.removeEventListener) {\n    element.removeEventListener(type, handler, false);\n  } else if ((element as any).detachEvent) {\n    (element as any).detachEvent(`on${type}`, handler);\n  } else {\n    (element as any)[`on${type}`] = null;\n  }\n}\n\nexport function innerWidth(el: HTMLElement) {\n  return getSize(el, \"Width\");\n}\nexport function innerHeight(el: HTMLElement) {\n  return getSize(el, \"Height\");\n}\nexport function getStyles(el: Element) {\n  return (SUPPORT_COMPUTEDSTYLE ?\n    window.getComputedStyle(el) : (el as any).currentStyle) || {};\n}\nfunction getSize(el: HTMLElement, name: \"Width\" | \"Height\") {\n  const size = (el as any)[`client${name}`] || (el as any)[`offset${name}`];\n\n  return parseFloat(size || getStyles(el)[name.toLowerCase()]) || 0;\n}\n\nexport function getContentElements(element: HTMLElement, tags: string[], prefix: string) {\n  const skipElements = toArray(element.querySelectorAll([\n    `[${prefix}skip] [${prefix}width]`,\n    ...tags.map(tag => ([\n      `[${prefix}skip] ${tag}`,\n      `${tag}[${prefix}skip]`,\n      `[${prefix}width] ${tag}`,\n    ]).join(\", \")),\n  ].join(\", \")));\n\n  return toArray<HTMLElement>(\n    element.querySelectorAll(`[${prefix}width], ${tags.join(\", \")}`),\n  ).filter(el => {\n    return skipElements.indexOf(el) === -1;\n  });\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { addEvent, removeEvent, innerWidth, innerHeight, getAttribute } from \"./utils\";\nimport { WIDTH, HEIGHT } from \"./consts\";\nimport { AutoSizerElement } from \"./types\";\n\nconst elements: AutoSizerElement[] = [];\n\nexport function addAutoSizer(element: AutoSizerElement, prefix: string) {\n  !elements.length && addEvent(window, \"resize\", resizeAllAutoSizers);\n  element.__PREFIX__ = prefix;\n  elements.push(element);\n  resize(element);\n}\nexport function removeAutoSizer(element: AutoSizerElement, prefix: string) {\n  const index = elements.indexOf(element);\n\n  if (index < 0) {\n    return;\n  }\n  const fixed = getAttribute(element, `${prefix}fixed`);\n\n  delete element.__PREFIX__;\n  element.style[fixed === HEIGHT ? WIDTH : HEIGHT] = \"\";\n  elements.splice(index, 1);\n\n  !elements.length && removeEvent(window, \"resize\", resizeAllAutoSizers);\n}\nfunction resize(element: AutoSizerElement, prefix = \"data-\") {\n  const elementPrefix = element.__PREFIX__ || prefix;\n  const dataWidth = parseInt(getAttribute(element, `${elementPrefix}${WIDTH}`), 10) || 0;\n  const dataHeight = parseInt(getAttribute(element, `${elementPrefix}${HEIGHT}`), 10) || 0;\n  const fixed = getAttribute(element, `${elementPrefix}fixed`);\n\n  if (fixed === HEIGHT) {\n    const size = innerHeight(element) || dataHeight;\n\n    element.style[WIDTH] = `${dataWidth / dataHeight * size}px`;\n  } else {\n    const size = innerWidth(element) || dataWidth;\n\n    element.style[HEIGHT] = `${dataHeight / dataWidth * size}px`;\n  }\n}\nexport function resizeAllAutoSizers() {\n  elements.forEach(element => {\n    resize(element);\n  });\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport Component from \"@egjs/component\";\nimport { addAutoSizer, removeAutoSizer } from \"../AutoSizer\";\nimport { ImReadyLoaderEvents, ImReadyLoaderOptions } from \"../types\";\nimport { removeEvent, hasSizeAttribute, hasLoadingAttribute, addEvent, hasSkipAttribute } from \"../utils\";\n\n\nexport default abstract class Loader<T extends HTMLElement = any> extends Component<ImReadyLoaderEvents> {\n  public static EVENTS: string[] = [];\n  public options!: ImReadyLoaderOptions;\n  public abstract checkElement(): boolean;\n  protected element!: T;\n  protected isReady = false;\n  protected isPreReady = false;\n  protected hasDataSize = false;\n  protected hasLoading = false;\n  protected isSkip = false;\n\n  constructor(element: HTMLElement, options: Partial<ImReadyLoaderOptions> = {}) {\n    super();\n    this.options = {\n      prefix: \"data-\",\n      ...options,\n    };\n    this.element = element as T;\n    const prefix = this.options.prefix;\n\n    this.hasDataSize = hasSizeAttribute(element, prefix);\n    this.isSkip = hasSkipAttribute(element, prefix);\n    this.hasLoading = hasLoadingAttribute(element, prefix);\n  }\n  public check() {\n    if (this.isSkip || !this.checkElement()) {\n      // I'm Ready\n      this.onAlreadyReady(true);\n      return false;\n    }\n\n    if (this.hasDataSize) {\n      addAutoSizer(this.element, this.options.prefix);\n    }\n    if (this.hasDataSize || this.hasLoading) {\n      // I'm Pre Ready\n      this.onAlreadyPreReady();\n    }\n    // Wati Pre Ready, Ready\n    return true;\n  }\n  public addEvents() {\n    const element = this.element;\n    (this.constructor as typeof Loader).EVENTS.forEach(name => {\n      addEvent(element, name, this.onCheck);\n    });\n  }\n  public clear() {\n    const element = this.element;\n    (this.constructor as typeof Loader).EVENTS.forEach(name => {\n      removeEvent(element, name, this.onCheck);\n    });\n    this.removeAutoSizer();\n  }\n  public destroy() {\n    this.clear();\n    this.off();\n  }\n  public removeAutoSizer() {\n    if (this.hasDataSize) {\n      // I'm already ready.\n      const { prefix } = this.options;\n\n      removeAutoSizer(this.element, prefix);\n    }\n  }\n  public onCheck = (e?: Event) => {\n    this.clear();\n\n\n    if (e && e.type === \"error\") {\n      this.onError(this.element);\n    }\n    if (this.hasLoading && this.checkElement()) {\n      // I'm not ready\n      return;\n    }\n    // I'm pre-ready and ready!\n    const withPreReady = !this.hasDataSize && !this.hasLoading;\n\n    this.onReady(withPreReady);\n  };\n  public onError(target: HTMLElement) {\n    this.trigger(\"error\", {\n      element: this.element,\n      target: target,\n    });\n  }\n  public onPreReady() {\n    if (this.isPreReady) {\n      return;\n    }\n    this.isPreReady = true;\n    this.trigger(\"preReady\", {\n      element: this.element,\n      hasLoading: this.hasLoading,\n      isSkip: this.isSkip,\n    });\n  }\n  public onReady(withPreReady: boolean) {\n    if (this.isReady) {\n      return;\n    }\n    withPreReady = !this.isPreReady && withPreReady;\n\n    if (withPreReady) {\n      this.isPreReady = true;\n    }\n    this.removeAutoSizer();\n    this.isReady = true;\n    this.trigger(\"ready\", {\n      element: this.element,\n      withPreReady,\n      hasLoading: this.hasLoading,\n      isSkip: this.isSkip,\n    });\n  }\n  public onAlreadyError(target: HTMLElement) {\n    setTimeout(() => {\n      this.onError(target);\n    });\n  }\n  public onAlreadyPreReady() {\n    setTimeout(() => {\n      this.onPreReady();\n    });\n  }\n  public onAlreadyReady(withPreReady: boolean) {\n    setTimeout(() => {\n      this.onReady(withPreReady);\n    });\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { addAutoSizer } from \"../AutoSizer\";\nimport { ImReadyLoaderOptions } from \"../types\";\nimport Loader from \"./Loader\";\n\n\nexport class ElementLoader<T extends HTMLElement> extends Loader<T> {\n  public static EVENTS: string[] = [];\n  public options!: ImReadyLoaderOptions;\n\n  public setHasLoading(hasLoading: boolean) {\n    this.hasLoading = hasLoading;\n  }\n  public check() {\n    if (this.isSkip) {\n      // I'm Ready\n      this.onAlreadyReady(true);\n      return false;\n    }\n\n    if (this.hasDataSize) {\n      addAutoSizer(this.element, this.options.prefix);\n      this.onAlreadyPreReady();\n    } else {\n      // has not data size\n      this.trigger(\"requestChildren\");\n    }\n    return true;\n  }\n  public checkElement() {\n    return true;\n  }\n  public destroy() {\n    this.clear();\n    this.trigger(\"requestDestroy\");\n    this.off();\n  }\n  public onAlreadyPreReady() {\n    // has data size\n    super.onAlreadyPreReady();\n    this.trigger(\"reqeustReadyChildren\");\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport Component, { ComponentEvent } from \"@egjs/component\";\nimport { ElementLoader } from \"./loaders/ElementLoader\";\nimport { ArrayFormat, ElementInfo, ImReadyEvents, ImReadyLoaderOptions, ImReadyOptions } from \"./types\";\nimport { toArray, getContentElements, hasLoadingAttribute } from \"./utils\";\n/**\n * @alias eg.ImReady\n * @extends eg.Component\n */\nclass ImReadyManager extends Component<ImReadyEvents> {\n  public options!: ImReadyOptions;\n  private readyCount = 0;\n  private preReadyCount = 0;\n  private totalCount = 0;\n  private totalErrorCount = 0;\n  private isPreReadyOver = true;\n  private elementInfos: ElementInfo[] = [];\n  /**\n   * @param - ImReady's options\n   */\n  constructor(options: Partial<ImReadyOptions> = {}) {\n    super();\n    this.options = {\n      loaders: {},\n      prefix: \"data-\",\n      ...options,\n    };\n  }\n  /**\n   * Checks whether elements are in the ready state.\n   * @ko 엘리먼트가 준비 상태인지 체크한다.\n   * @elements - Elements to check ready status. <ko> 준비 상태를 체크할 엘리먼트들.</ko>\n   * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReadyElement: e => {\n     *     // 1, 3\n     *     // 2, 3\n     *     // 3, 3\n     *     console.log(e.preReadyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n   */\n  public check(elements: ArrayFormat<HTMLElement>): this {\n    const { prefix } = this.options;\n\n    this.clear();\n    this.elementInfos = toArray(elements).map((element, index) => {\n      const loader = this.getLoader(element, { prefix });\n\n      loader.check();\n      loader.on(\"error\", e => {\n        this.onError(index, e.target);\n      }).on(\"preReady\", e => {\n        const info = this.elementInfos[index];\n\n        info.hasLoading = e.hasLoading;\n        info.isSkip = e.isSkip;\n        const isPreReady = this.checkPreReady(index);\n\n        this.onPreReadyElement(index);\n\n        isPreReady && this.onPreReady();\n      }).on(\"ready\", ({ withPreReady, hasLoading, isSkip }) => {\n        const info = this.elementInfos[index];\n\n        info.hasLoading = hasLoading;\n        info.isSkip = isSkip;\n\n        const isPreReady = withPreReady && this.checkPreReady(index);\n        const isReady = this.checkReady(index);\n\n        // Pre-ready and ready occur simultaneously\n        withPreReady && this.onPreReadyElement(index);\n        this.onReadyElement(index);\n\n        isPreReady && this.onPreReady();\n        isReady && this.onReady();\n      });\n\n      return {\n        loader,\n        element,\n        hasLoading: false,\n        hasError: false,\n        isPreReady: false,\n        isReady: false,\n        isSkip: false,\n      };\n    });\n\n    const length = this.elementInfos.length;\n\n    this.totalCount = length;\n    if (!length) {\n      setTimeout(() => {\n        this.onPreReady();\n        this.onReady();\n      });\n    }\n    return this;\n  }\n  /**\n   * Gets the total count of elements to be checked.\n   * @ko 체크하는 element의 총 개수를 가져온다.\n   */\n  public getTotalCount() {\n    return this.totalCount;\n  }\n  /**\n   * Whether the elements are all pre-ready. (all sizes are known)\n   * @ko 엘리먼트들이 모두 사전 준비가 됐는지 (사이즈를 전부 알 수 있는지) 여부.\n   */\n  public isPreReady() {\n    return this.elementInfos.every(info => info.isPreReady);\n  }\n  /**\n   * Whether the elements are all ready.\n   * @ko 엘리먼트들이 모두 준비가 됐는지 여부.\n   */\n  public isReady() {\n    return this.elementInfos.every(info => info.isReady);\n  }\n  /**\n   * Whether an error has occurred in the elements in the current state.\n   * @ko 현재 상태에서 엘리먼트들이 에러가 발생했는지 여부.\n   */\n  public hasError() {\n    return this.totalErrorCount > 0;\n  }\n  /**\n   * Clears events of elements being checked.\n   * @ko 체크 중인 엘리먼트들의 이벤트를 해제 한다.\n   */\n  public clear() {\n    this.isPreReadyOver = false;\n    this.totalCount = 0;\n    this.preReadyCount = 0;\n    this.readyCount = 0;\n    this.totalErrorCount = 0;\n    this.elementInfos.forEach(info => {\n      if (info.loader) {\n        info.loader.destroy();\n      }\n    });\n    this.elementInfos = [];\n  }\n  /**\n   * Destory all events.\n   * @ko 모든 이벤트를 해제 한다.\n   */\n  public destroy() {\n    this.clear();\n    this.off();\n  }\n  private getLoader(element: HTMLElement, options: ImReadyLoaderOptions) {\n    const tagName = element.tagName.toLowerCase();\n    const loaders = this.options.loaders;\n    const prefix = options.prefix;\n    const tags = Object.keys(loaders);\n\n    if (loaders[tagName]) {\n      return new loaders[tagName](element, options);\n    }\n    const loader = new ElementLoader(element, options);\n    const children = toArray(element.querySelectorAll<HTMLElement>(tags.join(\", \")));\n\n    loader.setHasLoading(children.some(el => hasLoadingAttribute(el, prefix)));\n    let withPreReady = false;\n\n    const childrenImReady = this.clone().on(\"error\", e => {\n      loader.onError(e.target);\n    }).on(\"ready\", () => {\n      loader.onReady(withPreReady);\n    });\n\n    loader.on(\"requestChildren\", () => {\n      // has not data size\n      const contentElements = getContentElements(element, tags, this.options.prefix);\n\n      childrenImReady.check(contentElements).on(\"preReady\", e => {\n        withPreReady = e.isReady;\n        if (!withPreReady) {\n          loader.onPreReady();\n        }\n      });\n    }).on(\"reqeustReadyChildren\", () => {\n      // has data size\n      // loader call preReady\n      // check only video, image elements\n      childrenImReady.check(children);\n    }).on(\"requestDestroy\", () => {\n      childrenImReady.destroy();\n    });\n\n    return loader;\n  }\n  private clone() {\n    return new ImReadyManager({ ...this.options });\n  }\n  private checkPreReady(index: number) {\n    this.elementInfos[index].isPreReady = true;\n    ++this.preReadyCount;\n\n\n    if (this.preReadyCount < this.totalCount) {\n      return false;\n    }\n    return true;\n  }\n  private checkReady(index: number) {\n    this.elementInfos[index].isReady = true;\n    ++this.readyCount;\n\n    if (this.readyCount < this.totalCount) {\n      return false;\n    }\n    return true;\n  }\n\n\n  private onError(index: number, target: HTMLElement) {\n    const info = this.elementInfos[index];\n\n    info.hasError = true;\n    /**\n     * An event occurs if the image, video fails to load.\n     * @ko 이미지, 비디오가 로딩에 실패하면 이벤트가 발생한다.\n     * @event eg.ImReady#error\n     * @param {eg.ImReady.OnError} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\"/>\n     *    <img src=\"ERR\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check([document.querySelector(\"div\")]).on({\n     *   error: e => {\n     *     // <div>...</div>, 0, <img src=\"ERR\"/>\n     *     console.log(e.element, e.index, e.target),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(new ComponentEvent(\"error\", {\n      element: info.element,\n      index,\n      target,\n      errorCount: this.getErrorCount(),\n      totalErrorCount: ++this.totalErrorCount,\n    }));\n  }\n  private onPreReadyElement(index: number) {\n    const info = this.elementInfos[index];\n    /**\n     * An event occurs when the element is pre-ready (when the loading attribute is applied or the size is known)\n     * @ko 해당 엘리먼트가 사전 준비되었을 때(loading 속성이 적용되었거나 사이즈를 알 수 있을 때) 이벤트가 발생한다.\n     * @event eg.ImReady#preReadyElement\n     * @param {eg.ImReady.OnPreReadyElement} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReadyElement: e => {\n     *     // 1, 3\n     *     // 2, 3\n     *     // 3, 3\n     *     console.log(e.preReadyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(new ComponentEvent(\"preReadyElement\", {\n      element: info.element,\n      index,\n\n      preReadyCount: this.preReadyCount,\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n\n      isPreReady: this.isPreReady(),\n      isReady: this.isReady(),\n      hasLoading: info.hasLoading,\n      isSkip: info.isSkip,\n    }));\n  }\n  private onPreReady() {\n    this.isPreReadyOver = true;\n    /**\n     * An event occurs when all element are pre-ready (When all elements have the loading attribute applied or the size is known)\n     * @ko 모든 엘리먼트들이 사전 준비된 경우 (모든 엘리먼트들이 loading 속성이 적용되었거나 사이즈를 알 수 있는 경우) 이벤트가 발생한다.\n     * @event eg.ImReady#preReady\n     * @param {eg.ImReady.OnPreReady} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReady: e => {\n     *     // 0, 3\n     *     console.log(e.readyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(new ComponentEvent(\"preReady\", {\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n      isReady: this.isReady(),\n      hasLoading: this.hasLoading(),\n    }));\n  }\n  private onReadyElement(index: number) {\n    const info = this.elementInfos[index];\n    /**\n     * An event occurs when the element is ready\n     * @ko 해당 엘리먼트가 준비가 되었을 때 이벤트가 발생한다.\n     * @event eg.ImReady#readyElement\n     * @param {eg.ImReady.OnReadyElement} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   readyElement: e => {\n     *     // 1, 0, false, 3\n     *     // 2, 1, false, 3\n     *     // 3, 2, true, 3\n     *     console.log(e.readyCount, e.index, e.hasError, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(new ComponentEvent(\"readyElement\", {\n      index,\n      element: info.element,\n\n      hasError: info.hasError,\n      errorCount: this.getErrorCount(),\n      totalErrorCount: this.totalErrorCount,\n\n      preReadyCount: this.preReadyCount,\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n\n      isPreReady: this.isPreReady(),\n      isReady: this.isReady(),\n\n      hasLoading: info.hasLoading,\n      isPreReadyOver: this.isPreReadyOver,\n      isSkip: info.isSkip,\n    }));\n  }\n  private onReady() {\n    /**\n     * An event occurs when all element are ready\n     * @ko 모든 엘리먼트들이 준비된 경우 이벤트가 발생한다.\n     * @event eg.ImReady#ready\n     * @param {eg.ImReady.OnReady} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReady: e => {\n     *     // 0, 3\n     *     console.log(e.readyCount, e.totalCount),\n     *   },\n     *   ready: e => {\n     *     // 1, 3\n     *     console.log(e.errorCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(new ComponentEvent(\"ready\", {\n      errorCount: this.getErrorCount(),\n      totalErrorCount: this.totalErrorCount,\n      totalCount: this.totalCount,\n    }));\n  }\n  private getErrorCount() {\n    return this.elementInfos.filter(info => info.hasError).length;\n  }\n  private hasLoading() {\n    return this.elementInfos.some(info => info.hasLoading);\n  }\n}\n\nexport default ImReadyManager;\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { IS_IE } from \"../consts\";\nimport Loader from \"./Loader\";\n\nexport default class ImageLoader extends Loader<HTMLImageElement> {\n  public static EVENTS = [\"load\", \"error\"];\n  public checkElement() {\n    const element = this.element;\n    const src = element.getAttribute(\"src\");\n\n    if (element.complete) {\n      if (src) {\n        // complete\n        if (!element.naturalWidth) {\n          this.onAlreadyError(element);\n        }\n        return false;\n      } else {\n        // Using an external lazy loading module\n        this.onAlreadyPreReady();\n      }\n    }\n    this.addEvents();\n    IS_IE && element.setAttribute(\"src\", src!);\n    return true;\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport Loader from \"./Loader\";\n\nexport default class VideoLoader extends Loader<HTMLVideoElement> {\n  public static EVENTS = [\"loadedmetadata\", \"error\"];\n  public checkElement() {\n    const element = this.element;\n    // HAVE_NOTHING: 0, no information whether or not the audio/video is ready\n    // HAVE_METADATA: 1, HAVE_METADATA - metadata for the audio/video is ready\n    // HAVE_CURRENT_DATA: 2, data for the current playback position is available, but not enough data to play next frame/millisecond\n    // HAVE_FUTURE_DATA: 3, data for the current and at least the next frame is available\n    // HAVE_ENOUGH_DATA: 4, enough data available to start playing\n    if (element.readyState >= 1) {\n      return false;\n    }\n    if (element.error) {\n      this.onAlreadyError(element);\n      return false;\n    }\n    this.addEvents();\n    return true;\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport ImReadyManager from \"./ImReadyManager\";\nimport ImageLoader from \"./loaders/ImageLoader\";\nimport VideoLoader from \"./loaders/VideoLoader\";\nimport { ImReadyOptions } from \"./types\";\n\nclass ImReady extends ImReadyManager {\n  constructor(options: Partial<ImReadyOptions> = {}) {\n    super({\n      loaders: {\n        img: ImageLoader,\n        video: VideoLoader,\n      },\n      ...options,\n    });\n  }\n}\n\nexport default ImReady;\n","import {\n  reactive,\n  ReactiveSetupAdapter,\n  ReactiveObject,\n  Ref,\n  isString,\n} from \"@cfcs/core\";\nimport { EVENTS } from \"./consts\";\nimport ImReady from \"./ImReady\";\nimport {\n  ImReadyEvents,\n  ImReadyReactiveProps,\n  ImReadyReactiveState,\n} from \"./types\";\nimport { toArray } from \"./utils\";\n\n\nexport type ReactiveImReady = ReactiveObject<{\n  preReadyCount: number;\n  readyCount: number;\n  errorCount: number;\n  totalErrorCount: number;\n  totalCount: number;\n  isPreReady: boolean;\n  isReady: boolean;\n  hasError: boolean;\n  isPreReadyOver: boolean;\n  add(element: HTMLElement): void;\n}>;\n\nexport const REACTIVE_IMREADY: ReactiveSetupAdapter<\n  ReactiveImReady,\n  ImReadyReactiveState,\n  \"add\",\n  Partial<ImReadyReactiveProps>,\n  ImReadyEvents\n> = ({ setEvents, setMethods, on, onInit, onDestroy, getProps }) => {\n  setEvents(EVENTS);\n  setMethods([\"add\"]);\n  const children: Array<HTMLElement | Ref<HTMLElement> | string> = [];\n  const reactiveImReady = reactive({\n    preReadyCount: 0,\n    readyCount: 0,\n    errorCount: 0,\n    totalErrorCount: 0,\n    totalCount: 0,\n    isPreReady: false,\n    isReady: false,\n    hasError: false,\n    isPreReadyOver: false,\n    add(element: HTMLElement | Ref<HTMLElement> | string) {\n      children.push(element);\n    },\n  });\n  const props = getProps() || {};\n  const imReady = new ImReady(props);\n\n  imReady\n    .on(\"error\", (e) => {\n      reactiveImReady.hasError = true;\n      reactiveImReady.errorCount = e.errorCount;\n      reactiveImReady.totalErrorCount = e.totalErrorCount;\n    })\n    .on(\"preReadyElement\", (e) => {\n      reactiveImReady.preReadyCount = e.preReadyCount;\n    })\n    .on(\"readyElement\", (e) => {\n      reactiveImReady.readyCount = e.readyCount;\n      reactiveImReady.isPreReadyOver = e.isPreReadyOver;\n    })\n    .on(\"preReady\", () => {\n      reactiveImReady.isPreReady = true;\n    })\n    .on(\"ready\", () => {\n      reactiveImReady.isReady = true;\n    });\n\n  on((_, name, callback) => {\n    imReady.on(name, callback);\n\n    return () => {\n      imReady.off(name, callback);\n    };\n  });\n  onInit(() => {\n    const selector = props?.selector;\n    let checkedElements: HTMLElement[] = [];\n\n    children.forEach((child) => {\n      if (!child) {\n        return;\n      }\n      if (isString(child)) {\n        checkedElements = [\n          ...checkedElements,\n          ...toArray(document.querySelectorAll<HTMLElement>(child)),\n        ];\n      } else if (child instanceof Element) {\n        checkedElements.push(child);\n      } else if (\"value\" in child || \"current\" in child) {\n        const element = child.value || child.current;\n\n        if (element) {\n          checkedElements.push(element);\n        }\n      }\n    });\n\n    if (selector) {\n      checkedElements = checkedElements.reduce((prev, cur) => {\n        return [\n          ...prev,\n          ...[].slice.call(cur.querySelectorAll<HTMLElement>(selector)),\n        ];\n      }, [] as HTMLElement[]);\n    }\n\n    reactiveImReady.totalCount = checkedElements.length;\n    imReady.check(checkedElements);\n  });\n  onDestroy(() => {\n    imReady.destroy();\n  });\n\n  return reactiveImReady;\n};\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport ImReady from \"./ImReady\";\nimport Manager from \"./ImReadyManager\";\nimport Loader from \"./loaders/Loader\";\nimport ImageLoader from \"./loaders/ImageLoader\";\nimport VideoLoader from \"./loaders/VideoLoader\";\n\nexport default ImReady;\nexport {\n  Manager,\n  VideoLoader,\n  ImageLoader,\n  Loader,\n};\nexport {\n  EVENTS,\n  PROPS,\n} from \"./consts\";\nexport * from \"./types\";\nexport * from \"./reactive\";\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport ImReady, * as modules from \"./index\";\n\nfor (const name in modules) {\n  (ImReady as any)[name] = (modules as any)[name];\n}\n\nexport default ImReady;\n"],"names":["isWindow","window","ua","navigator","userAgent","SUPPORT_COMPUTEDSTYLE","IS_IE","test","SUPPORT_ADDEVENTLISTENER","document","WIDTH","HEIGHT","PROPS","EVENTS","getAttribute","el","name","toArray","arr","slice","call","hasSizeAttribute","target","prefix","hasLoadingAttribute","hasSkipAttribute","addEvent","element","type","handler","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","innerWidth","getSize","innerHeight","getStyles","getComputedStyle","currentStyle","size","parseFloat","toLowerCase","getContentElements","tags","skipElements","querySelectorAll","__spreadArrays","map","tag","join","filter","indexOf","elements","addAutoSizer","length","resizeAllAutoSizers","__PREFIX__","push","resize","removeAutoSizer","index","fixed","style","splice","elementPrefix","dataWidth","parseInt","dataHeight","forEach","__extends","options","_super","_this","e","clear","onError","hasLoading","checkElement","withPreReady","hasDataSize","onReady","isSkip","onAlreadyReady","onAlreadyPreReady","constructor","onCheck","off","trigger","isPreReady","isReady","setTimeout","onPreReady","Loader","Component","ElementLoader","loaders","elementInfos","loader","getLoader","check","on","info","checkPreReady","onPreReadyElement","_a","checkReady","onReadyElement","hasError","totalCount","every","totalErrorCount","isPreReadyOver","preReadyCount","readyCount","destroy","tagName","Object","keys","children","setHasLoading","some","childrenImReady","clone","contentElements","ImReadyManager","ComponentEvent","errorCount","getErrorCount","src","complete","naturalWidth","onAlreadyError","addEvents","setAttribute","ImageLoader","readyState","error","VideoLoader","img","video","REACTIVE_IMREADY","setEvents","setMethods","onInit","onDestroy","getProps","reactiveImReady","reactive","add","props","imReady","ImReady","_","callback","selector","checkedElements","child","isString","Element","value","current","reduce","prev","cur","modules"],"mappings":"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"}